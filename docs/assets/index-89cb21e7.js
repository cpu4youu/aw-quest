import{s as i,g as $,S as k,T as A,a as M,Q as I,b as L,R as W,f as v,j as e}from"./index-458c0b3e.js";import{m,c as B}from"./index-d405afcf.js";import{b as F}from"./index.esm-23d54c60.js";import{b as h,u as H}from"./index-0c1d7132.js";import"./index-4d549987.js";import"./index-f37f2614.js";import"./index-a44ba5d3.js";import"./index-5216b7e6.js";const O=i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),Q=i("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),P=i("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),Y=i("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),z=i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),G=i("h2",{color:"$white500",fs:"24px",ff:"$heading",mr:"auto"}),N=i("div",{d:"grid",gap:"5px",mt:"20px",w:"100%",maxW:"1250px"}),q=i("div",{d:"grid",gap:"5px",maxH:"555px",overflowY:"auto",w:"100%",maxW:"1250px"}),D=i("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",w:"100%",h:"37px",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",px:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"0.5fr repeat(3, 1fr)",gap:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),K=i("div",{d:"grid",alignItems:"center",justifyContent:"center",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",minH:"55px",w:"100%",maxW:"1250px",bg:"rgba(72, 150, 222, 0.27)",pl:"20px",pr:"10px",mb:"15px",span:{d:"flex",align:"center",justify:"flex-start",color:"white",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(3, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"10px",span:{fs:"12px"}}}),U=i("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",w:"100%",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",pl:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(3, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"10px",span:{fs:"12px"}}}),E=i("div",{d:"flex",flexWrap:"wrap",gap:"5px",py:"5px",">span":{d:"flex",gap:"5px"},"@sm":{gridColumnStart:1,gridColumnEnd:5,align:"center",justify:"center"}}),g=i("div",{d:"flex",align:"center",justify:"center",direction:"column",img:{objectFit:"cover",br:"10px",w:"37px",h:"37px"},span:{d:"flex",align:"center",justify:"flex-start",mt:"-10px",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",color:"black !important",fs:"16px",fw:"bold",ff:"$heading"}}),J=async s=>await $({options:{code:k.GAME_MC,index_position:s,key_type:"i64",limit:"100",scope:k.GAME_MC,table:A.PLAYERS,reverse:!0}}),V=s=>M({queryKey:[I.LeaderBoard,s],queryFn:()=>X(s),staleTime:1e3*60*60});async function X(s){try{const l=await J(s);return l?Z(l):null}catch(l){return console.log(l),null}}async function Z(s){return s==null?void 0:s.map(l=>{var a,j,f;(a=l.buildings)==null||a.sort((r,u)=>h.findIndex(o=>o.label===r.buildingid)-h.findIndex(o=>o.label===u.buildingid));const x=(j=l.buildings)==null?void 0:j.filter(r=>r.building_type==="production"),_=(f=l.buildings)==null?void 0:f.filter(r=>r.building_type!=="production");return{...l,buildings:{production:x,special:_}}})}const oe=()=>{var C,T,S,y;L(n=>n.user);const{data:s,isLoading:l}=H(),[x,_]=W.useState(3),{data:a,isLoading:j}=V(x);function f(){B.setState(n=>({...n,selectedProduction:null}))}const r=v.useMemo(()=>{var c,d,t;if(!s)return;(c=s==null?void 0:s.buildings)==null||c.sort((p,R)=>h.findIndex(w=>w.label===p.buildingid)-h.findIndex(w=>w.label===R.buildingid));const n=(d=s.buildings)==null?void 0:d.filter(p=>p.building_type==="production"),b=(t=s.buildings)==null?void 0:t.filter(p=>p.building_type!=="production");return{...s,buildings:{production:n,special:b}}},[]),u=v.useMemo(()=>!a||!s?-1:a.findIndex(n=>n.wallet===s.wallet)+1,[a,s]),o=v.useCallback(n=>{},[]);return e.jsxs(O,{children:[e.jsxs(Q,{children:[e.jsx(P,{children:"Outpost Builder"}),e.jsx("img",{src:"/assets/background/bg-mcp-builder.jpeg",alt:""})]}),e.jsx(Y,{children:e.jsx(F,{onClick:f,color:"white",size:30})}),e.jsxs(z,{children:[e.jsx(G,{children:"SEASON LEADERBOARD"}),e.jsxs(N,{children:[e.jsxs(D,{children:[e.jsx("span",{onClick:()=>o("rank"),children:"Rank"}),e.jsx("span",{children:"Gamertag"}),e.jsx("span",{onClick:()=>o("score"),children:"Building Score"}),e.jsx("span",{onClick:()=>o("rMin"),children:"Ð¯ / min"}),e.jsx("span",{children:"Buildings"})]}),e.jsxs(K,{children:[e.jsx("span",{children:u===0?"> 100":u}),e.jsx("span",{children:r==null?void 0:r.gamertag}),e.jsx("span",{children:m((r==null?void 0:r.score_building)||0)}),e.jsx("span",{children:m((r==null?void 0:r.gamecurrency_per_minute)||0,3)}),e.jsxs(E,{children:[(T=(C=r==null?void 0:r.buildings)==null?void 0:C.production)==null?void 0:T.map(n=>e.jsxs(g,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid)),e.jsx("span",{children:(y=(S=r==null?void 0:r.buildings)==null?void 0:S.special)==null?void 0:y.map(n=>e.jsxs(g,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid))})]})]}),e.jsx(q,{children:a==null?void 0:a.map((n,b)=>{var c,d;return e.jsxs(U,{children:[e.jsx("span",{children:b+1}),e.jsx("span",{children:n.gamertag}),e.jsx("span",{children:m(n.score_building,3)}),e.jsx("span",{children:m((n==null?void 0:n.gamecurrency_per_minute)||0,3)}),e.jsxs(E,{children:[(c=n.buildings.production)==null?void 0:c.map(t=>e.jsxs(g,{children:[e.jsx("img",{src:`/assets/mcp/${t==null?void 0:t.buildingid}.png`,alt:""}),e.jsx("span",{children:t.building_level===0?"-":t.building_level})]},t.buildingid)),e.jsx("span",{children:(d=n.buildings.special)==null?void 0:d.map(t=>e.jsxs(g,{children:[e.jsx("img",{src:`/assets/mcp/${t==null?void 0:t.buildingid}.png`,alt:""}),e.jsx("span",{children:t.building_level===0?"-":t.building_level})]},t.buildingid))})]})]},n.wallet)})})]})]})]})};export{oe as default};
