import{s as o,g as W,S as A,T as L,d as P,Q as z,R as S,_ as $,r as _,j as e}from"./index-5c5264f1.js";import{c as F}from"./index-9a4f712f.js";import{b as H}from"./index.esm-7752eb15.js";import{b as v,u as O}from"./index-b597cefb.js";import{m}from"./mcpFormatNumber-1b3dda04.js";import"./mineCooldown-a94e265a.js";import"./index-1aba9e3c.js";import"./index-220d4c40.js";import"./use-transaction-d600ec16.js";import"./toast-options-bcc4cf31.js";import"./sleep-da79c358.js";import"./index-a6976370.js";import"./index-c01884cf.js";import"./index-af704bdb.js";import"./use-media-8ab1fd2a.js";import"./index-a2411e30.js";import"./iconBase-6df78a68.js";import"./adapters-4a503dd2.js";import"./axios-45629df5.js";import"./index-807e636e.js";const Q=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),B=o("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),D=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),G=o("h2",{color:"$white500",fs:"24px",ff:"$heading",mr:"auto"}),Y=o("div",{d:"grid",gap:"5px",mt:"20px",w:"100%",maxW:"1250px"}),N=o("div",{d:"grid",gap:"5px",maxH:"555px",overflowY:"auto",w:"100%",maxW:"1250px"}),V=o("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",w:"100%",h:"37px",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",px:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"0.5fr repeat(4, 1fr)",gap:"5x",pl:"10px",pr:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),T=o("button",{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading","&:hover":{color:"$yellow500"},variants:{selected:{true:{color:"$yellow500"}}},"@sm":{fs:"12px","&:last-child":{d:"none"}}}),q=o("div",{d:"grid",alignItems:"center",justifyContent:"center",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",minH:"55px",w:"100%",maxW:"1250px",bg:"rgba(72, 150, 222, 0.27)",pl:"20px",pr:"10px",mb:"15px",span:{d:"flex",align:"center",justify:"space-between",gap:"15px",color:"white",fs:"16px",fw:"bold",ff:"$heading",svg:{mr:"5px"}},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(4, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"5px",pl:"10px",pr:"10px",span:{fs:"12px"}}}),K=o("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",w:"100%",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",pl:"20px",span:{d:"flex",align:"center",justify:"space-between",gap:"15px",color:"#797979",fs:"16px",fw:"bold",ff:"$heading",svg:{mr:"5px"}},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(4, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"5px",pl:"10px",pr:"10px",span:{fs:"12px"}}}),M=o("div",{d:"flex",flexWrap:"wrap",gap:"5px",py:"5px",">span":{d:"flex",gap:"5px"},"@sm":{gridColumnStart:1,gridColumnEnd:5,align:"center",justify:"center"}}),w=o("div",{d:"flex",align:"center",justify:"center",direction:"column",img:{objectFit:"cover",br:"10px",w:"37px",h:"37px"},span:{d:"flex",align:"center",justify:"flex-start",mt:"-10px",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",color:"black !important",fs:"16px",fw:"bold",ff:"$heading"}}),U=async n=>await W({options:{code:A.GAME_MC,index_position:n,key_type:"i64",limit:"100",scope:A.GAME_MC,table:L.PLAYERS,reverse:!0}}),J=n=>P({queryKey:[z.LeaderBoard,n],queryFn:()=>X(n),staleTime:1e3*60*60});async function X(n){try{const t=await U(n);return t?Z(t):null}catch(t){return console.log(t),null}}async function Z(n){return n==null?void 0:n.map(t=>{var b,s,p;(b=t.buildings)==null||b.sort((c,f)=>v.findIndex(x=>x.label===c.buildingid)-v.findIndex(x=>x.label===f.buildingid));const a=(s=t.buildings)==null?void 0:s.filter(c=>c.building_type==="production"),l=(p=t.buildings)==null?void 0:p.filter(c=>c.building_type!=="production");return{...t,buildings:{production:a,special:l}}})}const ee=S.lazy(()=>$(()=>import("./index-ce0811c2.js"),["assets/index-ce0811c2.js","assets/index-5c5264f1.js","assets/index-55fec1ff.css"])),j=S.lazy(()=>$(()=>import("./atom-af5cb42b.js"),["assets/atom-af5cb42b.js","assets/index-5c5264f1.js","assets/index-55fec1ff.css"])),we=()=>{var x,y,E,k,R;const{data:n}=O(),[t,a]=S.useState(3),{data:l}=J(t);function b(){F.setState(r=>({...r,selectedProduction:null}))}const s=_.useMemo(()=>{var u,g,i;if(!n)return;(u=n==null?void 0:n.buildings)==null||u.sort((h,I)=>v.findIndex(C=>C.label===h.buildingid)-v.findIndex(C=>C.label===I.buildingid));const r=(g=n.buildings)==null?void 0:g.filter(h=>h.building_type==="production"),d=(i=n.buildings)==null?void 0:i.filter(h=>h.building_type!=="production");return{...n,buildings:{production:r,special:d}}},[]),p=_.useMemo(()=>!l||!n?-1:l.findIndex(r=>r.wallet===n.wallet)+1,[l,n]),c=_.useCallback(r=>r<3?e.jsx(j,{color:"#e80066"}):r<10?e.jsx(j,{color:"#e69839"}):r<25?e.jsx(j,{color:"#9716ec"}):r<50?e.jsx(j,{color:"#2a74e6"}):e.jsx(j,{color:"#9d9d9d"}),[]),f=_.useCallback(r=>{switch(r){case"mcp":a(2);break;case"score":a(3);break;case"rMin":a(4);break;default:a(3)}},[]);return e.jsxs(Q,{children:[e.jsx(ee,{}),e.jsx(B,{children:e.jsx(H,{onClick:b,color:"white",size:30})}),e.jsxs(D,{children:[e.jsx(G,{children:"SEASON LEADERBOARD"}),e.jsxs(Y,{children:[e.jsxs(V,{children:[e.jsx("span",{children:"Rank"}),e.jsx("span",{children:"Gamertag"}),e.jsx(T,{selected:t===3,onClick:()=>f("score"),children:"ScoreðŸ†"}),e.jsx(T,{selected:t===4,onClick:()=>f("rMin"),children:"Ð¯ / min"}),e.jsx(T,{selected:t===2,onClick:()=>f("mcp"),children:"MCP earned"}),e.jsx("span",{children:"Buildings"})]}),e.jsxs(q,{children:[e.jsx("span",{children:p===0?"> 100":e.jsxs(e.Fragment,{children:[" ",p," ",c(p-1)," "]})}),e.jsx("span",{children:s==null?void 0:s.gamertag}),e.jsx("span",{children:m((s==null?void 0:s.score_building)||0,3)}),e.jsx("span",{children:m((s==null?void 0:s.gamecurrency_per_minute)||0,3)}),e.jsx("span",{children:m((s==null?void 0:s.score_mcp)||0,3)}),e.jsxs(M,{children:[(y=(x=s==null?void 0:s.buildings)==null?void 0:x.production)==null?void 0:y.map(r=>e.jsxs(w,{children:[e.jsx("img",{loading:"lazy",src:`/assets/mcp/${r==null?void 0:r.buildingid}.png`,alt:""}),e.jsx("span",{children:r.building_level===0?"-":r.building_level})]},r.buildingid)),e.jsx("span",{children:(k=(E=s==null?void 0:s.buildings)==null?void 0:E.special)==null?void 0:k.map(r=>e.jsxs(w,{children:[e.jsx("img",{loading:"lazy",src:`/assets/mcp/${r==null?void 0:r.buildingid}.png`,alt:""}),e.jsx("span",{children:r.building_level===0?"-":r.building_level})]},r.buildingid))})]})]}),e.jsx(N,{children:(R=l==null?void 0:l.sort((r,d)=>t!==3?0:d.score_building-r.score_building||d.gamecurrency_per_minute-r.gamecurrency_per_minute))==null?void 0:R.map((r,d)=>{var u,g;return e.jsxs(K,{children:[e.jsxs("span",{children:[d+1," ",t===3&&c(d)]}),e.jsx("span",{children:r.gamertag}),e.jsx("span",{children:m(r.score_building,3)}),e.jsx("span",{children:m((r==null?void 0:r.gamecurrency_per_minute)||0,3)}),e.jsx("span",{children:m((r==null?void 0:r.score_mcp)||0,3)}),e.jsxs(M,{children:[(u=r.buildings.production)==null?void 0:u.map(i=>e.jsxs(w,{children:[e.jsx("img",{loading:"lazy",src:`/assets/mcp/${i==null?void 0:i.buildingid}.png`,alt:""}),e.jsx("span",{children:i.building_level===0?"-":i.building_level})]},i.buildingid)),e.jsx("span",{children:(g=r.buildings.special)==null?void 0:g.map(i=>e.jsxs(w,{children:[e.jsx("img",{loading:"lazy",src:`/assets/mcp/${i==null?void 0:i.buildingid}.png`,alt:""}),e.jsx("span",{children:i.building_level===0?"-":i.building_level})]},i.buildingid))})]})]},r.wallet)})})]})]})]})};export{we as default};
