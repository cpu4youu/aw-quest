import{s as l,g as A,S as E,T as M,a as I,Q as L,b as W,R as B,f as C,j as e}from"./index-d4e8c4c1.js";import{m as f,c as F}from"./index-824493ca.js";import{b as H}from"./index.esm-cb9bff86.js";import{b as g,u as O}from"./index-df8f59eb.js";import"./index-4ba5db22.js";import"./index-3e7de249.js";import"./index-53ea9bcc.js";import"./index-06cf5bdb.js";const Q=l("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),P=l("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),Y=l("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),z=l("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),G=l("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),N=l("h2",{color:"$white500",fs:"24px",ff:"$heading",mr:"auto"}),q=l("div",{d:"grid",gap:"5px",mt:"20px",w:"100%",maxW:"1250px"}),D=l("div",{d:"grid",gap:"5px",maxH:"555px",overflowY:"auto",w:"100%",maxW:"1250px"}),K=l("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",w:"100%",h:"37px",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",px:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"0.5fr repeat(3, 1fr)",gap:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),U=l("div",{d:"grid",alignItems:"center",justifyContent:"center",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",minH:"55px",w:"100%",maxW:"1250px",bg:"rgba(72, 150, 222, 0.27)",pl:"20px",pr:"10px",mb:"15px",span:{d:"flex",align:"center",justify:"flex-start",color:"white",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(3, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"10px",span:{fs:"12px"}}}),J=l("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",w:"100%",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",pl:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(3, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"10px",span:{fs:"12px"}}}),R=l("div",{d:"flex",flexWrap:"wrap",gap:"5px",py:"5px",">span":{d:"flex",gap:"5px"},"@sm":{gridColumnStart:1,gridColumnEnd:5,align:"center",justify:"center"}}),u=l("div",{d:"flex",align:"center",justify:"center",direction:"column",img:{objectFit:"cover",br:"10px",w:"37px",h:"37px"},span:{d:"flex",align:"center",justify:"flex-start",mt:"-10px",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",color:"black !important",fs:"16px",fw:"bold",ff:"$heading"}}),V=async r=>await A({options:{code:E.GAME_MC,index_position:r,key_type:"i64",limit:"100",scope:E.GAME_MC,table:M.PLAYERS,reverse:!0}}),X=r=>I({queryKey:[L.LeaderBoard,r],queryFn:()=>Z(r),staleTime:1e3*60*60});async function Z(r){try{const s=await V(r);return s?ee(s):null}catch(s){return console.log(s),null}}async function ee(r){return r==null?void 0:r.map(s=>{var j,a,b;(j=s.buildings)==null||j.sort((o,t)=>g.findIndex(c=>c.label===o.buildingid)-g.findIndex(c=>c.label===t.buildingid));const m=(a=s.buildings)==null?void 0:a.filter(o=>o.building_type==="production"),h=(b=s.buildings)==null?void 0:b.filter(o=>o.building_type!=="production");return{...s,buildings:{production:m,special:h}}})}const ce=()=>{var T,y,S,k;const r=W(n=>n.user),{data:s,isLoading:m}=O(),[h,j]=B.useState(3),{data:a,isLoading:b}=X(h);function o(){F.setState(n=>({...n,selectedProduction:null}))}const t=C.useMemo(()=>{var d,p,i;if(!s)return;(d=s==null?void 0:s.buildings)==null||d.sort((x,$)=>g.findIndex(_=>_.label===x.buildingid)-g.findIndex(_=>_.label===$.buildingid));const n=(p=s.buildings)==null?void 0:p.filter(x=>x.building_type==="production"),v=(i=s.buildings)==null?void 0:i.filter(x=>x.building_type!=="production");return{...s,buildings:{production:n,special:v}}},[]),c=C.useMemo(()=>!a||!s?-1:a.findIndex(n=>n.wallet===s.wallet)+1,[a,s]),w=C.useCallback(n=>{},[]);return e.jsxs(Q,{children:[e.jsxs(P,{children:[e.jsx(Y,{children:"Outpost Builder"}),e.jsx("img",{src:"/assets/background/bg-mcp-builder.jpeg",alt:""})]}),e.jsx(z,{children:e.jsx(H,{onClick:o,color:"white",size:30})}),e.jsxs(G,{children:[e.jsx(N,{children:"SEASON LEADERBOARD"}),e.jsxs(q,{children:[e.jsxs(K,{children:[e.jsx("span",{onClick:()=>w("rank"),children:"Rank"}),e.jsx("span",{children:"Gamertag"}),e.jsx("span",{onClick:()=>w("score"),children:"Building Score"}),e.jsx("span",{onClick:()=>w("rMin"),children:"Ð¯ / min"}),e.jsx("span",{children:"Buildings"})]}),e.jsxs(U,{children:[e.jsx("span",{children:c===0?"> 100":c}),e.jsx("span",{children:t==null?void 0:t.wallet}),e.jsx("span",{children:f((t==null?void 0:t.score_building)||0)}),e.jsx("span",{children:f((t==null?void 0:t.gamecurrency_per_minute)||0,3)}),e.jsxs(R,{children:[(y=(T=t==null?void 0:t.buildings)==null?void 0:T.production)==null?void 0:y.map(n=>e.jsxs(u,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid)),e.jsx("span",{children:(k=(S=t==null?void 0:t.buildings)==null?void 0:S.special)==null?void 0:k.map(n=>e.jsxs(u,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid))})]})]}),e.jsx(D,{children:a==null?void 0:a.map((n,v)=>{var d,p;return e.jsxs(J,{children:[e.jsx("span",{children:v+1}),e.jsx("span",{children:(r==null?void 0:r.playertag)??(r==null?void 0:r.name)}),e.jsx("span",{children:f(n.score_building,3)}),e.jsx("span",{children:f((n==null?void 0:n.gamecurrency_per_minute)||0,3)}),e.jsxs(R,{children:[(d=n.buildings.production)==null?void 0:d.map(i=>e.jsxs(u,{children:[e.jsx("img",{src:`/assets/mcp/${i==null?void 0:i.buildingid}.png`,alt:""}),e.jsx("span",{children:i.building_level===0?"-":i.building_level})]},i.buildingid)),e.jsx("span",{children:(p=n.buildings.special)==null?void 0:p.map(i=>e.jsxs(u,{children:[e.jsx("img",{src:`/assets/mcp/${i==null?void 0:i.buildingid}.png`,alt:""}),e.jsx("span",{children:i.building_level===0?"-":i.building_level})]},i.buildingid))})]})]},n.wallet)})})]})]})]})};export{ce as default};
