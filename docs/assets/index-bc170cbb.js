import{e as Ae,s as c,g as He,S as Q,T as Xe,d as Ke,q as Ye,Q as Ne,R as F,_ as Y,u as qe,r as f,j as e,B as k,f as X}from"./index-a2cda690.js";import{o as ye,u as Je,a as Ze,b as Pe,c as P,e as en,d as nn,f as tn}from"./index-a677c1a2.js";import{o as G,u as sn}from"./index-37f60452.js";import{b as an,c as we}from"./index.esm-4bef2f51.js";import{u as on}from"./inventory-query-9d679564.js";import{m as M}from"./mcpFormatNumber-1b3dda04.js";import{s as U}from"./sleep-da79c358.js";import{u as J}from"./use-transaction-958b5045.js";import{N as ve}from"./index-9ce3fd94.js";import{D as rn,a as ln,b as cn}from"./index-bbd46343.js";import{G as dn}from"./iconBase-cb6b7792.js";import{c as K}from"./mineCooldown-cd521479.js";import"./index-d86857ef.js";import"./index-8cef6aa8.js";import"./index-856af8a1.js";import"./use-media-563e6b19.js";import"./index-0e08f4f6.js";import"./adapters-de3a3ba5.js";import"./axios-45629df5.js";import"./toast-options-21781e45.js";import"./index-7aef0965.js";import"./index-9b0fe3a7.js";import"./index.esm-7ec63119.js";import"./index-86640936.js";import"./index-045636aa.js";const Oe=Ae({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Re=Ae({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),pn=c("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),un=c("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),fn=c("div",{d:"flex",align:"flex-start",justify:"center",gap:"30px",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),xn=c("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"51%",">button":{w:"100%",h:"40px",fs:"16px",mt:"20px",div:{border:"none"}},"@md":{w:"100%",">button":{maxW:"100%"}}}),Ce=c("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%"}),Se=c("div",{d:"flex",align:"flex-end",justify:"center",w:"100%",gap:"10px",span:{fw:"bold",fs:"16px",ff:"$heading",color:"#BCBCBC","&:first-child":{fs:"24px",color:"$white500"},"&:last-child":{ml:"auto",fs:"16px",color:"#72C630"}}}),ke=c("span",{mt:"10px",mr:"auto",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"}),mn=c("div",{d:"flex",align:"center",justify:"space-between",mt:"30px",w:"100%",img:{br:"20px",width:"100px"}}),gn=c("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",gap:"10px",button:{padding:"0",minW:"unset",w:"120px",h:"40px",fs:"16px",div:{border:"none"}},span:{fw:"bold",fs:"16px",ff:"$heading",color:"$white500"}}),hn=c("div",{d:"flex",align:"center",justify:"center",gap:"20px",mt:"40px"}),Be=c("button",{d:"flex",align:"center",justify:"center",direction:"column",img:{w:"100%",maxW:"160px",h:"244px"},span:{fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"},"&:disabled":{cursor:"not-allowed",opacity:"0.5"}}),jn=c("span",{mt:"10px",textAlign:"center",fs:"26px",ff:"$heading",fw:"bold",color:"$white500"}),Ee=c("span",{d:"flex",align:"center",justify:"center",gap:"10px",textAlign:"center",mr:"auto",mb:"10px",fs:"26px",ff:"$heading",fw:"bold",color:"$white500",span:{color:"#EBB309"},"> svg":{h:"25px",w:"25px"},variants:{isLoading:{true:{">button >svg":{animation:`${Re} 0.5s ease-in-out infinite`}}}},"@sm":{flexWrap:"wrap"}}),$e=c("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",mt:"20px",bg:"rgba(0,0,0,0.46)",br:"10px ",padding:"20px",".input":{width:"100%",alignItems:"flex-start",justifyContent:"flex-start",label:{w:"max-content",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"},">div":{br:"10px",border:"3px solid #697078",bg:"#D9D9D9",input:{color:"$black500"}}},">button":{w:"100%",h:"40px",fs:"16px",mt:"20px",div:{border:"none"}},"@md":{">button":{maxW:"100%"},".input":{maxW:"100%"}}}),Te=c("div",{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",flexDirection:"column",width:"100%",mt:"20px",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC",">span:first-child":{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"}}),Le=c("div",{display:"flex",alignItems:"center",justifyContent:"center",fs:"16px",ff:"$heading",fw:"bold",color:"#00BAFF",span:{ff:"math",mr:"5px"}}),Me=c("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",mt:"20px",bg:"rgba(0,0,0,0.46)",br:"10px ",padding:"20px"}),De=c("span",{d:"flex",align:"center",justify:"center",gap:"10px",textAlign:"center",mr:"auto",mb:"10px",fs:"26px",ff:"$heading",fw:"bold",color:"$white500",span:{color:"#EBB309"},"> svg":{h:"25px",w:"25px"},variants:{isLoading:{true:{">button >svg":{animation:`${Re} 0.5s ease-in-out infinite`}}}},"@sm":{flexWrap:"wrap"}}),Ie=c("div",{display:"flex",alignItems:"center",justifyContent:"center",gap:"20px",width:"100%","@sm":{flexWrap:"wrap"}}),q=c("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",">button":{w:"100%",minW:"150px",h:"75px",fs:"16px",div:{border:"none"},svg:{w:"20px",h:"20px"}},"@md":{">button":{maxW:"100%"},".input":{maxW:"100%"}}}),O=c("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",span:{fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC","&:last-child":{color:"#00BAFF"}}}),We=c("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"65%","@md":{w:"100%"}}),_n=c("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"5px",w:"100%",mt:"20px"}),bn=c("button",{d:"flex",align:"center",justify:"center",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC",variants:{selected:{true:{color:"#00BAFF"}}}}),yn=c("div",{d:"flex",align:"flex-start",justify:"flex-start",flexWrap:"wrap",gap:"10px",mt:"20px"});c("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${Oe} 1.2s ease-in-out infinite`});const wn=c("div",{w:"160px",height:"224px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.20), rgba(3, 16, 32, 0.75) ,rgba(255, 255, 255, 0.20))",br:"10px",backgroundSize:"400% 400%",animation:`${Oe} 1.2s ease-in-out infinite`}),vn=async()=>await He({options:{code:Q.GAME_MC,index_position:1,limit:"10000",scope:Q.GAME_MC,table:Xe.BONUSES}}),Cn=()=>Ke({queryKey:[Ne.BONUSES],queryFn:()=>kn(),staleTime:1e3*60*60});async function Sn(){return await Ye.invalidateQueries(Ne.BONUSES)}async function kn(){try{const o=await vn();return o||null}catch(o){return console.log(o),null}}async function Bn(o,r,u){const{executeTransaction:j}=J(),_=En(o,r,u);return!!await j(_)}function En(o,r,u){const j={actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:o.name,permission:o.authorization.permission}],data:{from:o.name,to:"game.mc",memo:`nftstake,${r}`,asset_ids:u}}]};return console.log(j),j}async function $n(o,r){const{executeTransaction:u}=J(),j=Tn(o,r);return!!await u(j)}function Tn(o,r){return{actions:[{account:Q.GAME_MC,name:"gctomcp",authorization:[{actor:o.name,permission:o.authorization.permission}],data:{wallet:o.name,gamecurrency:r}}]}}const Ln=c("div",{d:"flex",align:"center",justify:"center",direction:"column",bg:"$dark_blue500",w:"80vw",maxW:"300px",">button":{mt:"20px",w:"100%",minW:"150px",h:"30px",fs:"16px",div:{border:"none"},svg:{w:"20px",h:"20px"}}}),Mn=c("span",{d:"flex",align:"center",justify:"center",mr:"auto",ff:"$heading",fs:"22px",fw:"$bold",color:"$light_blue500"}),Dn=c("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%"}),In=c("div",{d:"flex",align:"center",justify:"center",gap:"10px",ff:"$heading",fs:"26px",fw:"$bold",mt:"15px",ml:"0px",textAlign:"center",color:"$white500",svg:{w:"30px",h:"30px"}}),Wn=c("span",{d:"flex",align:"center",justify:"center",gap:"10px",ff:"$heading",fs:"26px",fw:"$bold",mt:"15px",ml:"10px",textAlign:"center",color:"$white500",span:{color:"#EBB309"}}),An=c("span",{bg:"rgba(0,0,0,0.5)",padding:"10px",w:"100%",ff:"$heading",fs:"16px",fw:"$normal",mt:"15px",textAlign:"center",color:"$white500",span:{fw:"$bold"}});function Nn(o){return dn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"}}]})(o)}async function qn(o,r,u){const{executeTransaction:j}=J(),_=On(o,r,u);return!!await j(_)}function On(o,r,u){return{actions:[{account:Q.GAME_MC,name:"qptogc",authorization:[{actor:o.name,permission:o.authorization.permission}],data:{wallet:o.name,qp:r,expected_resources:u}}]}}async function Rn(o,r){const{executeTransaction:u}=J(),j=Fn(o,r);return!!await u(j)}function Fn(o,r){return{actions:[{account:Q.GAME_MC,name:"qptogcfill",authorization:[{actor:o.name,permission:o.authorization.permission}],data:{wallet:o.name,qp:r}}]}}const Vn=F.lazy(()=>Y(()=>import("./quest-8cae1b7f.js"),["assets/quest-8cae1b7f.js","assets/index-a2cda690.js","assets/index-55fec1ff.css"])),R=({children:o,rValue:r=0,qpValue:u=0,isFillStorage:j,disabled:_})=>{const x=qe(d=>d.user),[D,p]=f.useState(!1),[y,n]=f.useState(K(new Date(new Date(new Date().toUTCString().substring(0,25)).getTime()+15*1e3))),[s,a]=f.useState(!1);function m(d){a(d)}async function E(d,$){if(x){p(!0);try{await qn(x,d,Math.floor($))&&(await U(1500),await G(),await ye(),X.success("Purchase successful"),a(!1))}catch(W){console.log(W)}finally{p(!1)}}}async function B(d){if(x){p(!0);try{await Rn(x,d)&&(await U(1500),await G(),await ye(),X.success("Storage used successfully"))}catch($){console.log($)}finally{p(!1)}}}const I=f.useMemo(()=>y.seconds>9?y.seconds:`0${y.seconds}`,[y]);return f.useEffect(()=>{if(s){const d=new Date(new Date().toUTCString().substring(0,25)).getTime()+15e3,$=setInterval(()=>{const W=K(new Date(d));n(W)},1e3);return()=>{n({days:0,hours:0,minutes:0,seconds:15,difference:0}),clearInterval($)}}},[s]),f.useEffect(()=>{y.minutes===0&&y.seconds===0&&a(!1)},[y]),e.jsxs(rn,{onOpenChange:m,open:s,children:[e.jsx(ln,{disabled:_,children:o}),e.jsx(cn,{closeType:"primary",closePosition:"inside",children:e.jsxs(Ln,{children:[e.jsx(Mn,{children:"Confirm"}),e.jsxs(Dn,{children:[e.jsxs(In,{children:[e.jsx(Vn,{})," ",u]}),e.jsx(Nn,{color:"white",size:35}),e.jsxs(Wn,{children:[" ",e.jsx("span",{children:"Я"}),` > ${M(r*.95,3)}`]})]}),e.jsxs(An,{children:["If the transaction would result ",e.jsx("br",{})," in less ",e.jsx("span",{children:"Я"}),", it is aborted."]}),e.jsxs(k,{isLoading:D,disabled:D,onClick:()=>j?B(u):E(u,r*.95),color:"solidBlue",rounded:!1,children:["Confirm (",I,"s)"]})]})})]})},zn=F.lazy(()=>Y(()=>import("./index-02651859.js"),["assets/index-02651859.js","assets/index-a2cda690.js","assets/index-55fec1ff.css"])),H=F.lazy(()=>Y(()=>import("./star-42c94589.js"),["assets/star-42c94589.js","assets/index-a2cda690.js","assets/index-55fec1ff.css"])),L=F.lazy(()=>Y(()=>import("./quest-8cae1b7f.js"),["assets/quest-8cae1b7f.js","assets/index-a2cda690.js","assets/index-55fec1ff.css"])),Gn={days:0,hours:0,minutes:0,seconds:0},Fe=F.memo(({gamecurecy:o})=>{var ae,oe,re,le,ce,de,pe,ue,fe,xe,me,ge,he,je,_e,be;const{data:r,isLoading:u}=sn(),{data:j}=Je(),{data:_}=Cn(),{data:x,isLoading:D}=Ze(),{data:p,isLoading:y}=Pe(),n=P(t=>t.selectedProduction),s=qe(t=>t.user),a=f.useMemo(()=>j==null?void 0:j.find(t=>t.buildingid===(n==null?void 0:n.buildingid)),[j,n==null?void 0:n.buildingid]),[m,E]=f.useState(!1),[B,I]=f.useState(0),[d,$]=f.useState(Gn),[W,Ve]=f.useState((ae=a==null?void 0:a.allowed_schemas)==null?void 0:ae[0]),A=f.useMemo(()=>Array.from({length:(a==null?void 0:a.slot_unlock_levels.length)||0},(t,i)=>{var S;const l=(S=n==null?void 0:n.staked_asset_ids)==null?void 0:S[i];if(!l)return;const g=_==null?void 0:_.find(w=>{var h;return w.schema===l.schema.schema_name&&w.rarity===l.data.rarity&&w.shine===(((h=l==null?void 0:l.data)==null?void 0:h.shine)||"Stone")});return{...l,bonus:(g==null?void 0:g.bonus_percent)||0}}),[_,a==null?void 0:a.slot_unlock_levels.length,n==null?void 0:n.staked_asset_ids]),[b,ee]=f.useState(A),{data:Z,isLoading:ze}=on(W??((oe=a==null?void 0:a.allowed_schemas)==null?void 0:oe[0]));async function Ge(){if(!(!s||!(n!=null&&n.buildingid))){E(!0);try{await en(s,n==null?void 0:n.buildingid)&&(await U(3e3),G())}catch(t){console.log(t)}finally{E(!1)}}}async function ne(){await nn()}async function te(){if(s){E(!0);try{if(!B)return;await $n(s,B)&&(await U(3e3),G(),X.success("Delivery successful"),I(0))}catch(t){console.log(t)}finally{E(!1)}}}async function Ue(){if(s){E(!0);try{const t=b.filter(l=>!!(l!=null&&l.asset_id)&&!A.includes(l)).map(l=>Number(l==null?void 0:l.asset_id));if(!(n!=null&&n.buildingid))return;await Bn(s,n==null?void 0:n.buildingid,t)&&(await U(3e3),await G(),await tn(),await Sn(),X.success("Stake successfully"))}catch(t){console.log(t)}finally{E(!1)}}}function Qe(){P.setState(t=>({...t,selectedProduction:null}))}function se(t,i){const l=b==null?void 0:b.map((g,S)=>S===t?i:g);ee(l)}const ie=f.useMemo(()=>{const t=d.hours>9?d.hours:`0${d.hours}`,i=d.minutes>0?`${d.minutes>9?d.minutes:`0${d.minutes}`}`:"00",l=d.seconds>9?d.seconds:`0${d.seconds}`;return t==="00"?`${i}:${l}`:`${t}:${i}:${l}`},[d]),v=f.useMemo(()=>{if(!(x!=null&&x[0])||!p)return 0;const t=x==null?void 0:x[0],i=o,l=Number(t==null?void 0:t.mcp),g=(t==null?void 0:t.gamecurrency)||0,S=l*g,w=((r==null?void 0:r.max_gamecurrency)??0)-i,h=g-w,z=S/h-l;return Math.round(z/p.mcpperqp)<1?1:Math.round(z/p.mcpperqp)},[r==null?void 0:r.max_gamecurrency,p,o,x]),N=f.useMemo(()=>{if(!x||!n)return;const t=x[0],i=B+B*n.building_level/100+B*n.nft_bonuspercent/100,l=Number(t.mcp),g=Number(t.gamecurrency),w=l*g/(g+i);return Math.floor(l-w)<0?0:Math.floor(l-w)},[x,B,n]),C=f.useCallback(t=>{if(!x||!(p!=null&&p.mcpperqp)||!(r!=null&&r.max_gamecurrency))return 0;const i=x[0],l=Number(i.mcp),g=i.gamecurrency,w=l*g/(l+t*(p==null?void 0:p.mcpperqp)),h=Math.floor(g-w);return h<0?0:h>r.max_gamecurrency?r.max_gamecurrency:g-w},[x,p==null?void 0:p.mcpperqp,r==null?void 0:r.max_gamecurrency]),V=f.useMemo(()=>{const t=(a==null?void 0:a.slot_unlock_levels.findLastIndex(i=>((n==null?void 0:n.building_level)??0)>=i))??0;return t===-1?!0:A[t]===void 0?!1:A[t]!==void 0},[n,A,a==null?void 0:a.slot_unlock_levels]),T=f.useMemo(()=>{var t,i;return Math.floor(v/2)>(((t=s==null?void 0:s.userWeekly)==null?void 0:t.total_quest_points)??0)?((i=s==null?void 0:s.userWeekly)==null?void 0:i.total_quest_points)??0:Math.floor(v/2)},[v,(re=s==null?void 0:s.userWeekly)==null?void 0:re.total_quest_points]);return f.useEffect(()=>{ee(A)},[A]),f.useEffect(()=>{if(!r||!n)return;const t=r==null?void 0:r.buildings.find(i=>i.buildingid===n.buildingid);P.setState(i=>({...i,selectedProduction:t}))},[r,n]),f.useEffect(()=>{const t=K(new Date(new Date((n==null?void 0:n.last_interaction)||"").getTime()+((p==null?void 0:p.seconds_market_cd)??0)*1e3));if(t.minutes!==0&&t.seconds!==0){const i=setInterval(()=>{const l=K(new Date(new Date((n==null?void 0:n.last_interaction)||"").getTime()+((p==null?void 0:p.seconds_market_cd)??0)*1e3));$(l)},1e3);return()=>{clearInterval(i)}}},[n==null?void 0:n.last_interaction,p==null?void 0:p.seconds_market_cd]),e.jsxs(pn,{children:[e.jsx(zn,{}),e.jsx(un,{children:e.jsx(an,{onClick:Qe,color:"white",size:30})}),e.jsxs(fn,{children:[e.jsxs(xn,{children:[e.jsxs(Ce,{children:[e.jsxs(Se,{children:[e.jsx("span",{children:n==null?void 0:n.building_name}),e.jsxs("span",{children:["Level ",n==null?void 0:n.building_level]}),(a==null?void 0:a.building_type)==="production"?e.jsxs("span",{children:["Я ",n==null?void 0:n.gamecurrency_per_minute_boosted,"/min"]}):e.jsx("span",{})]}),e.jsx(ke,{children:a==null?void 0:a.building_description})]}),e.jsxs(mn,{children:[e.jsxs(gn,{children:[e.jsxs("span",{children:["Я ",M((n==null?void 0:n.gamecurrency_upgrade_cost)||0,3)]}),e.jsx(k,{isLoading:m,rounded:!1,color:"solidBlue",disabled:m||o<((n==null?void 0:n.gamecurrency_upgrade_cost)||0),onClick:Ge,children:"UPGRADE"})]}),e.jsx("img",{loading:"lazy",src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""})]}),e.jsx(hn,{children:b==null?void 0:b.map((t,i)=>{const l=(a==null?void 0:a.slot_unlock_levels.findLastIndex(g=>((n==null?void 0:n.building_level)??0)>=g))??0;return e.jsxs(Be,{disabled:V||i>l,onClick:()=>se(i,void 0),children:[e.jsxs("span",{children:["Level ",a==null?void 0:a.slot_unlock_levels[i]]}),e.jsx("img",{loading:"lazy",src:t?`/assets/aw-nft-images/${t==null?void 0:t.template.template_id}.webp`:"/assets/default-card.png",alt:""})]},(t==null?void 0:t.asset_id)||i)})}),e.jsx(jn,{children:`${b.reduce((t,i)=>t+=(i==null?void 0:i.bonus)||0,0)}% ${(n==null?void 0:n.buildingid)==="market"?"ADDITIONAL BONUS DELIVERY":(n==null?void 0:n.buildingid)==="storage"?"BONUS STORAGE":"BONUS PRODUCTION"}`}),e.jsx(k,{isLoading:m,disabled:m||V,rounded:!1,color:"solidBlue",onClick:Ue,children:"STAKE UNTIL END OF SEASON"}),(n==null?void 0:n.buildingid)==="market"&&!V&&e.jsxs(e.Fragment,{children:[e.jsxs($e,{children:[e.jsxs(Ee,{isLoading:D,children:["EXCHANGE ",e.jsx("span",{children:"Я"})," FOR ",e.jsx(H,{}),e.jsx("button",{disabled:D,onClick:ne,children:e.jsx(we,{color:"white",size:40})})]}),e.jsx(ve,{onChange:t=>I(Number((t==null?void 0:t.target.value)||0)),value:B,maxButton:!0,onClickMaxButton:()=>I(o),type:"number",borderColor1:"transparent",borderColor2:"transparent",className:"input",label:"Я to deliver to Mission Control"}),e.jsxs(Te,{children:[e.jsxs("span",{children:["Estimated ",e.jsx(H,{})]}),e.jsxs(Le,{children:[e.jsx("span",{children:"~"})," ",N==null?void 0:N.toLocaleString("en-US")]})]}),e.jsx(k,{disabled:m||d.minutes!==0||d.seconds!==0,rounded:!1,color:"solidBlue",onClick:te,children:d.minutes!==0||d.seconds!==0?ie:"DELIVER NOW"})]}),e.jsxs(Me,{children:[e.jsxs(De,{children:["EXCHANGE ",e.jsx(L,{})," FOR ",e.jsx("span",{children:"Я"})]}),e.jsxs(Ie,{children:[e.jsx(R,{disabled:(((le=s==null?void 0:s.userWeekly)==null?void 0:le.total_quest_points)??0)<1||n.building_level<1,qpValue:1,rValue:C(1),children:e.jsxs(q,{children:[e.jsx(k,{isLoading:m||u||y,disabled:m||(((ce=s==null?void 0:s.userWeekly)==null?void 0:ce.total_quest_points)??0)<1||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( 1 ",e.jsx(L,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",M(C(1),3)]})]})]})}),e.jsx(R,{disabled:(((de=s==null?void 0:s.userWeekly)==null?void 0:de.total_quest_points)??0)<1||n.building_level<1,qpValue:T,rValue:C(T),children:e.jsxs(q,{children:[e.jsx(k,{isLoading:m||u||y,disabled:m||(((pe=s==null?void 0:s.userWeekly)==null?void 0:pe.total_quest_points)??0)<1||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( ",T," ",e.jsx(L,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",M(C(T),3)]})]})]})}),e.jsx(R,{isFillStorage:!0,disabled:(((ue=s==null?void 0:s.userWeekly)==null?void 0:ue.total_quest_points)??0)<1||n.building_level<1,qpValue:v,rValue:C(v),children:e.jsxs(q,{children:[e.jsx(k,{isLoading:m||u||y,disabled:m||(((fe=s==null?void 0:s.userWeekly)==null?void 0:fe.total_quest_points)??0)<v||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Fill Storage ",e.jsx("br",{})," ( ",v," ",e.jsx(L,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",M(C(v),3)]})]})]})})]})]})]})]}),(n==null?void 0:n.buildingid)==="market"&&V&&e.jsxs(We,{children:[e.jsxs($e,{children:[e.jsxs(Ee,{isLoading:D,children:["EXCHANGE ",e.jsx("span",{children:"Я"})," FOR ",e.jsx(H,{}),e.jsx("button",{disabled:D,onClick:ne,children:e.jsx(we,{color:"white",size:40})})]}),e.jsx(ve,{onChange:t=>I(Number((t==null?void 0:t.target.value)||0)),value:B,maxButton:!0,onClickMaxButton:()=>I(Math.floor(o)),type:"number",borderColor1:"transparent",borderColor2:"transparent",className:"input",label:"Я to deliver to Mission Control"}),e.jsxs(Te,{children:[e.jsxs("span",{children:["Estimated ",e.jsx(H,{})]}),e.jsxs(Le,{children:[e.jsx("span",{children:"~"})," ",N==null?void 0:N.toLocaleString("en-US")]})]}),e.jsx(k,{disabled:m||n.building_level<1||d.minutes!==0||d.seconds!==0,rounded:!1,color:"solidBlue",onClick:te,children:d.minutes!==0||d.seconds!==0?ie:"DELIVER NOW"})]}),e.jsxs(Me,{children:[e.jsxs(De,{children:["EXCHANGE ",e.jsx(L,{})," FOR ",e.jsx("span",{children:"Я"})]}),e.jsxs(Ie,{children:[e.jsx(R,{disabled:(((xe=s==null?void 0:s.userWeekly)==null?void 0:xe.total_quest_points)??0)<1||n.building_level<1,qpValue:1,rValue:C(1),children:e.jsxs(q,{children:[e.jsx(k,{isLoading:m||u||y,disabled:m||(((me=s==null?void 0:s.userWeekly)==null?void 0:me.total_quest_points)??0)<1||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( 1 ",e.jsx(L,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",M(C(1),3)]})]})]})}),e.jsx(R,{disabled:(((ge=s==null?void 0:s.userWeekly)==null?void 0:ge.total_quest_points)??0)<1||n.building_level<1,qpValue:T,rValue:C(T),children:e.jsxs(q,{children:[e.jsx(k,{isLoading:m||u||y,disabled:m||(((he=s==null?void 0:s.userWeekly)==null?void 0:he.total_quest_points)??0)<1||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( ",T," ",e.jsx(L,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",M(C(T),3)]})]})]})}),e.jsx(R,{isFillStorage:!0,disabled:(((je=s==null?void 0:s.userWeekly)==null?void 0:je.total_quest_points)??0)<1||n.building_level<1,qpValue:v,rValue:C(v),children:e.jsxs(q,{children:[e.jsx(k,{isLoading:m||u||y,disabled:m||(((_e=s==null?void 0:s.userWeekly)==null?void 0:_e.total_quest_points)??0)<v||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Fill Storage ",e.jsx("br",{})," ( ",v," ",e.jsx(L,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",M(C(v),3)]})]})]})})]})]})]}),!V&&e.jsxs(We,{children:[e.jsxs(Ce,{children:[e.jsxs(Se,{children:[e.jsx("span",{children:"NFT SELECTION"}),e.jsx("span",{})]}),e.jsx(ke,{children:"Each building allows different schemas for staking. The rarity of the NFT determines the efficiency bonus."})]}),e.jsx(_n,{children:(be=a==null?void 0:a.allowed_schemas)==null?void 0:be.map(t=>e.jsx(bn,{onClick:()=>Ve(t),selected:W===t,children:t},t))}),e.jsx(yn,{children:ze?Array.from({length:20}).map((t,i)=>e.jsx(wn,{},i)):Z==null?void 0:Z.map(t=>{var w;const i=_==null?void 0:_.find(h=>{var z;return h.schema===t.schema.schema_name&&h.rarity===t.data.rarity&&h.shine===(((z=t==null?void 0:t.data)==null?void 0:z.shine)||"Stone")}),l=b==null?void 0:b.findIndex(h=>h===void 0),g=b==null?void 0:b.some(h=>(t==null?void 0:t.asset_id)===(h==null?void 0:h.asset_id)),S=(a==null?void 0:a.slot_unlock_levels.findLastIndex(h=>((n==null?void 0:n.building_level)??0)>=h))??0;return e.jsxs(Be,{disabled:g||b[S]!==void 0||S===-1,onClick:()=>se(l,{...t,bonus:(i==null?void 0:i.bonus_percent)||0}),children:[e.jsx("img",{loading:"lazy",src:`/assets/aw-nft-images/${t==null?void 0:t.template.template_id}.webp`,alt:(w=t==null?void 0:t.data)==null?void 0:w.name}),e.jsxs("span",{children:[(i==null?void 0:i.bonus_percent)||0,"%"]})]},t.asset_id)})})]})]})]})});Fe.displayName="McpBuilderDetailsComponent";const gt=F.memo(Fe);export{gt as default};
